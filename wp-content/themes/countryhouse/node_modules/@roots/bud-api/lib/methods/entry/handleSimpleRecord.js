import { handleTypeError } from '../../errors/handleValidationTypeError.js';
import { normalizeRecord } from './normalize.js';
import * as schema from './schema.js';
export async function handleSimpleRecord(bud, input) {
    const [value] = input;
    const records = await schema.inputRecord.safeParseAsync(value);
    if (!records.success)
        handleTypeError(bud, `bud.entry`, records);
    const current = bud.hooks.filter(`build.entry`, {});
    bud.hooks.on(`build.entry`, {
        ...current,
        ...normalizeRecord(records.data),
    });
    return bud;
}
//# sourceMappingURL=handleSimpleRecord.js.map