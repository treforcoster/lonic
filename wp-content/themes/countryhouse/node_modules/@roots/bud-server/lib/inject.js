/**
 * Inject webpack entrypoints with client scripts
 */
export const inject = async (app, injection) => {
    app.hooks.on(`build.entry`, entrypoints => {
        if (!injection)
            return entrypoints;
        return Object.entries(entrypoints ?? {}).reduce((entrypoints, [name, entry]) => {
            name = name ?? `main`;
            return {
                ...entrypoints,
                [name]: {
                    ...(entry ?? {}),
                    import: [
                        ...(entry?.import ?? `index`),
                        ...injection.map(fn => fn(app)),
                    ].filter(Boolean),
                },
            };
        }, {});
    });
};
//# sourceMappingURL=inject.js.map