import { __decorate, __metadata } from "tslib";
import { bind } from 'helpful-decorators';
/**
 * Blade loader plugin
 */
export default class BladeWebpackPlugin {
    /**
     * Plugin constructor
     */
    constructor(options) {
        this.options = options;
    }
    /**
     * Apply plugin
     */
    async apply(compiler) {
        const use = [`@roots/blade-loader/asset-loader`];
        if (this.options?.extractScripts !== false) {
            use.unshift(`@roots/blade-loader/module-loader`);
        }
        compiler.hooks.afterEnvironment.tap(this.constructor.name, () => {
            compiler.options.module.rules.push({
                test: /\.php$/,
                use,
            });
        });
    }
}
__decorate([
    bind,
    __metadata("design:type", Function),
    __metadata("design:paramtypes", [Function]),
    __metadata("design:returntype", Promise)
], BladeWebpackPlugin.prototype, "apply", null);
//# sourceMappingURL=plugin.js.map